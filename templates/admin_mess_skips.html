{% extends "base.html" %}
{% block content %}

<h3 class="mb-4 fw-bold text-center">üçΩÔ∏è Mess Skips Overview</h3>

<!-- üî¢ Tomorrow Summary -->
<div class="row mb-4">
  <div class="col-md-6 mb-3">
    <div class="alert alert-warning text-center fw-bold shadow-sm rounded-3">
      Tomorrow ({{ tomorrow }})<br>
      <span class="fs-5">Athaayam Skips</span><br>
      <span class="fs-3">{{ tomorrow_counts.athaayam }}</span>
    </div>
  </div>

  <div class="col-md-6 mb-3">
    <div class="alert alert-info text-center fw-bold shadow-sm rounded-3">
      Tomorrow ({{ tomorrow }})<br>
      <span class="fs-5">Iftaar Skips</span><br>
      <span class="fs-3">{{ tomorrow_counts.ifthaar }}</span>
    </div>
  </div>
</div>

<!-- üìã All Skips Table -->
<div class="card shadow-sm rounded-4">
  <div class="card-body table-responsive">

    <table class="table table-hover align-middle">
      <thead class="table-dark text-center">
        <tr>
          <th>Name</th>
          <th>Course</th>
          <th>Date</th>
          <th>Meal</th>
          <th>Applied At</th>
        </tr>
      </thead>

      <tbody class="text-center">
        {% for s in all_skips %}
        <tr>
          <td class="fw-semibold">{{ s.name }}</td>
          <td>{{ s.course }}</td>
          <td>{{ s.skip_date.strftime("%d-%m-%Y") }}</td>

          <td>
            <span class="badge 
              {% if s.meal_type == 'athaayam' %}
                bg-warning text-dark
              {% else %}
                bg-info
              {% endif %}">
              {{ s.meal_type|capitalize }}
            </span>
          </td>

          <td>{{ s.applied_at.strftime("%d-%m-%Y %I:%M %p") }}</td>
        </tr>
        {% else %}
        <tr>
          <td colspan="5" class="text-muted text-center py-4">
            No meal skips found
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>

  </div>
</div>

{% endblock %}
